"use strict";(self["webpackChunkvue_element_admin"]=self["webpackChunkvue_element_admin"]||[]).push([[2272],{72272:function(e,t,n){n.r(t),n.d(t,{default:function(){return M}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role-permission"},[t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v(e._s(e.$t("permissionPage.addRole")))]),t("el-table",{attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"key",align:"center",label:e.$t("permissionPage.key"),width:"220px"}}),t("el-table-column",{attrs:{prop:"name",align:"center",label:e.$t("permissionPage.name"),width:"220px"}}),t("el-table-column",{attrs:{prop:"desc",label:e.$t("permissionPage.desc")}}),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function({row:n}){return[t("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.edit(n)}}},[e._v(" "+e._s(e.$t("permissionPage.edit"))+" ")]),t("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteRole(n)}}},[e._v(" "+e._s(e.$t("permissionPage.delete"))+" ")])]}}])})],1),t("role-dialog",{attrs:{visible:e.visible,row:e.currentRow,"is-edit":e.isEdit},on:{"update:visible":function(t){e.visible=t},add:e.addRole,edit:e.editRole}})],1)},a=[],r=(n(44114),n(18111),n(20116),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.show,title:e.title},on:{"update:visible":function(t){e.show=t}}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"left"}},[t("el-form-item",{attrs:{label:e.$t("permissionPage.key"),prop:"key"}},[t("el-input",{model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1),t("el-form-item",{attrs:{label:e.$t("permissionPage.name"),prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:e.$t("permissionPage.desc"),prop:"desc"}},[t("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),t("el-form-item",{attrs:{label:e.$t("permissionPage.menu"),prop:"menuKeys"}},[t("menu-tree",{model:{value:e.form.menuKeys,callback:function(t){e.$set(e.form,"menuKeys",t)},expression:"form.menuKeys"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:function(t){e.show=!1}}},[e._v(e._s(e.$t("permissionPage.cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v(e._s(e.$t("permissionPage.submit")))])],1)],2)}),o=[],s=function(){var e=this,t=e._self._c;return t("el-scrollbar",[t("tree-select",{attrs:{"node-key":"key",data:e.menus,props:{label:"name"}},model:{value:e.keys,callback:function(t){e.keys=t},expression:"keys"}})],1)},l=[],m=n(18467);const d=m.A.t.bind(m.A);function c(){return[{key:"dashboard",name:d("route.dashboard")},{key:"document",name:d("route.document")},{key:"guide",name:d("route.guide")},{key:"permission",name:d("route.permission"),children:[{key:"pagePermission",name:d("route.pagePermission")},{key:"directivePermission",name:d("route.directivePermission")},{key:"rolePermission",name:d("route.rolePermission")}]},{key:"icons",name:d("route.icons")},{key:"component",name:d("route.component"),children:[{key:"tinymce",name:d("route.tinymce")},{key:"markdown",name:d("route.markdown")},{key:"jsonEditor",name:d("route.jsonEditor")},{key:"splitPane",name:d("route.splitPane")},{key:"avatarUpload",name:d("route.avatarUpload")},{key:"dropzone",name:d("route.dropzone")},{key:"sticky",name:d("route.sticky")},{key:"countTo",name:d("route.countTo")},{key:"componentMixin",name:d("route.componentMixin")},{key:"backToTop",name:d("route.backToTop")},{key:"dragDialog",name:d("route.dragDialog")},{key:"dragSelect",name:d("route.dragSelect")},{key:"dndList",name:d("route.dndList")},{key:"dragKanban",name:d("route.dragKanban")}]},{key:"chart",name:d("route.chart"),children:[{key:"keyboardChart",name:d("route.keyboardChart")},{key:"lineChart",name:d("route.lineChart")},{key:"mixChart",name:d("route.mixChart")}]},{key:"nested",name:d("route.nested"),children:[{key:"menu1",name:d("route.menu1"),children:[{key:"menu1-1",name:d("route.menu1-1")},{key:"menu1-2",name:d("route.menu1-2"),children:[{key:"menu1-2-1",name:d("route.menu1-2-1")},{key:"menu1-2-2",name:d("route.menu1-2-2")}]},{key:"menu1-3",name:d("route.menu1-3")}]},{key:"menu2",name:d("route.menu2")}]},{key:"table",name:d("route.table"),children:[{key:"dynamicTable",name:d("route.dynamicTable")},{key:"dragTable",name:d("route.dragTable")},{key:"inlineEditTable",name:d("route.inlineEditTable")},{key:"complexTable",name:d("route.complexTable")}]},{key:"example",name:d("route.example"),children:[{key:"createArticle",name:d("route.createArticle")},{key:"articleList",name:d("route.articleList")}]},{key:"tab",name:d("route.tab")},{key:"error",name:d("route.error"),children:[{key:"error401",name:d("route.error401")},{key:"error404",name:d("route.error404")}]},{key:"excel",name:d("route.excel"),children:[{key:"exportExcel",name:d("route.exportExcel")},{key:"exportSelectedExcel",name:d("route.exportSelectedExcel")},{key:"exportMergeHeaderExcel",name:d("route.exportMergeHeaderExcel")},{key:"uploadExcel",name:d("route.uploadExcel")}]},{key:"zip",name:d("route.zip"),children:[{key:"exportZip",name:d("route.exportZip")}]},{key:"pdf",name:d("route.pdf")},{key:"theme",name:d("route.theme")},{key:"clipboard",name:d("route.clipboard")},{key:"i18n",name:d("route.i18n")},{key:"link",name:d("route.link")}]}var u=c,p=function(){var e=this,t=e._self._c;return t("el-tree",e._b({ref:"tree",attrs:{"node-key":e.nodeKey,"show-checkbox":""},on:{"check-change":e.checkChange}},"el-tree",e.$attrs,!1))},h=[],y={name:"TreeSelect",model:{prop:"value",event:"change"},props:{value:{type:Array,default:()=>[]},nodeKey:{type:String,required:!0}},watch:{value:{handler(e){this.setCheckedKeys(e)},immediate:!0}},methods:{setCheckedKeys(e){this.$nextTick(()=>{this.$refs.tree?.setCheckedKeys(e)})},getCheckedKeys(){this.$nextTick(()=>{const e=this.$refs.tree?.getCheckedKeys()||[];this.$emit("change",e)})},checkChange(){this.getCheckedKeys()}}},k=y,g=n(81656),b=(0,g.A)(k,p,h,!1,null,null,null),f=b.exports,x={name:"MenuTree",components:{TreeSelect:f},model:{prop:"value",event:"change"},props:{value:{type:Array,default:()=>[]}},data(){return{menus:[]}},computed:{keys:{get(){return this.value},set(e){this.$emit("change",e)}},language(){return this.$store.state.app.language}},watch:{language:{handler(){this.getMenus()},immediate:!0}},methods:{getMenus(){this.menus=u()}}},v=x,$=(0,g.A)(v,s,l,!1,null,"79d7a738",null),P=$.exports;const T={key:"",name:"",desc:"",menuKeys:[]};var w={name:"RoleDialog",components:{MenuTree:P},props:{visible:{type:Boolean,default:!1},row:{type:Object,default:()=>({})},isEdit:{type:Boolean,default:!1}},data(){return{form:{...T}}},computed:{show:{get(){return this.visible},set(e){this.$emit("update:visible",e)}},title(){return this.isEdit?this.$t("permissionPage.editRole"):this.$t("permissionPage.addRole")},rules(){return{key:[{required:!0,message:this.$t("permissionPage.inputKey")}],name:[{required:!0,message:this.$t("permissionPage.inputRole")}]}}},watch:{visible(e){e&&this.init()}},methods:{init(){this.isEdit?Object.assign(this.form,{...this.row}):this.form={...T},this.$nextTick(()=>{this.$refs.form?.clearValidate()})},submit(){this.$refs.form?.validate(e=>{e&&(this.show=!1,this.$emit(this.isEdit?"edit":"add",{id:Date.now(),...this.form}))})}}},E=w,C=(0,g.A)(E,r,o,!1,null,null,null),_=C.exports,K={name:"RolePermission",components:{RoleDialog:_},data(){return{visible:!1,isEdit:!1,currentRow:null,tableData:[{id:1,key:"admin",name:"admin",desc:"Super Administrator. Have access to view all pages.",menuKeys:["dashboard","document","guide","permission","pagePermission","directivePermission","rolePermission","icons","component","tinymce","markdown","jsonEditor","splitPane","avatarUpload","dropzone","sticky","countTo","componentMixin","backToTop","dragDialog","dragSelect","dndList","dragKanban","chart","keyboardChart","lineChart","mixChart","nested","menu1","menu1-1","menu1-2","menu1-2-1","menu1-2-2","menu1-3","menu2","table","dynamicTable","dragTable","inlineEditTable","complexTable","example","createArticle","articleList","tab","error","error401","error404","excel","exportExcel","exportSelectedExcel","exportMergeHeaderExcel","uploadExcel","zip","exportZip","pdf","theme","clipboard","i18n","link"]},{id:2,key:"user",name:"user",desc:"Normal User. Can see all pages except permission page",menuKeys:["dashboard","document","guide","directivePermission","icons","component","tinymce","markdown","jsonEditor","splitPane","avatarUpload","dropzone","sticky","countTo","componentMixin","backToTop","dragDialog","dragSelect","dndList","dragKanban","chart","keyboardChart","lineChart","mixChart","nested","menu1","menu1-1","menu1-2","menu1-2-1","menu1-2-2","menu1-3","menu2","table","dynamicTable","dragTable","inlineEditTable","complexTable","example","createArticle","articleList","tab","error","error401","error404","excel","exportExcel","exportSelectedExcel","exportMergeHeaderExcel","uploadExcel","zip","exportZip","pdf","theme","clipboard","i18n","link"]},{id:3,key:"visitor",name:"visitor",desc:"Just a visitor. Can only see the home page and the document page",menuKeys:["dashboard","document"]}]}},methods:{add(){this.visible=!0,this.isEdit=!1,this.currentRow=null},edit(e){this.visible=!0,this.isEdit=!0,this.currentRow={...e}},addRole(e){this.tableData.push({...e}),this.$notify({title:this.$t("permissionPage.addSucced"),dangerouslyUseHTMLString:!0,message:`\n            <div>${this.$t("permissionPage.key")} ${e.key}</div>\n            <div>${this.$t("permissionPage.name")} ${e.name}</div>\n            <div>${this.$t("permissionPage.desc")} ${e.desc}</div>\n          `,type:"success"})},editRole(e){const t=this.tableData.find(t=>t.id===e.id);Object.assign(t,{...e}),this.$notify({title:this.$t("permissionPage.editSucced"),dangerouslyUseHTMLString:!0,message:`\n            <div>${this.$t("permissionPage.key")} ${e.key}</div>\n            <div>${this.$t("permissionPage.name")} ${e.name}</div>\n            <div>${this.$t("permissionPage.desc")} ${e.desc}</div>\n          `,type:"success"})},deleteRole(e){this.$confirm(this.$t("permissionPage.msg"),this.$t("permissionPage.warning"),{confirmButtonText:this.$t("permissionPage.confirm"),cancelButtonText:this.$t("permissionPage.cancel"),type:"warning"}).then(()=>{const t=this.tableData.findIndex(t=>t.id===e.id);this.tableData.splice(t,1),this.$message.success(this.$t("permissionPage.deleteSucced"))}).catch(()=>{})}}},R=K,S=(0,g.A)(R,i,a,!1,null,"56bc25ac",null),M=S.exports}}]);